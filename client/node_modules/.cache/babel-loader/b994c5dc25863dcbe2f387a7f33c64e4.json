{"ast":null,"code":"import { useRef as t, useEffect as o, forwardRef as e, useState as n, useImperativeHandle as r, createElement as a } from \"react\";\n\nfunction i() {\n  return (i = Object.assign || function (t) {\n    for (var o = 1; o < arguments.length; o++) {\n      var e = arguments[o];\n\n      for (var n in e) Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);\n    }\n\n    return t;\n  }).apply(this, arguments);\n}\n\nvar l = function () {};\n\nfunction c(t, o) {\n  return Math.floor(Math.random() * (o - t + 1) + t);\n}\n\nvar s = e(function (e, s) {\n  var u = e.progress,\n      d = e.height,\n      f = void 0 === d ? 2 : d,\n      v = e.className,\n      p = void 0 === v ? \"\" : v,\n      h = e.color,\n      b = void 0 === h ? \"red\" : h,\n      g = e.background,\n      m = void 0 === g ? \"transparent\" : g,\n      w = e.onLoaderFinished,\n      y = e.transitionTime,\n      x = void 0 === y ? 300 : y,\n      S = e.loaderSpeed,\n      k = void 0 === S ? 500 : S,\n      R = e.waitingTime,\n      T = void 0 === R ? 1e3 : R,\n      Y = e.shadow,\n      I = void 0 === Y || Y,\n      O = n(0),\n      j = O[0],\n      M = O[1],\n      N = n({\n    active: !1,\n    startingValue: 20,\n    refreshRate: 1e3\n  }),\n      P = N[0],\n      V = N[1],\n      z = n(!1),\n      F = z[0],\n      L = z[1],\n      q = n({\n    active: !1,\n    value: 20\n  }),\n      A = q[0],\n      B = q[1],\n      C = {\n    position: \"fixed\",\n    top: 0,\n    left: 0,\n    height: f,\n    background: m,\n    zIndex: 99999999999,\n    width: \"100%\"\n  },\n      D = {\n    boxShadow: \"0 0 10px \" + b + \", 0 0 10px \" + b,\n    width: \"5%\",\n    opacity: 1,\n    position: \"absolute\",\n    height: \"100%\",\n    transition: \"all \" + k + \"ms ease\",\n    transform: \"rotate(3deg) translate(0px, -4px)\",\n    left: \"-10rem\"\n  },\n      E = n({\n    height: \"100%\",\n    background: b,\n    transition: \"all \" + k + \"ms ease\",\n    width: \"0%\"\n  }),\n      G = E[0],\n      H = E[1],\n      J = n(D),\n      K = J[0],\n      Q = J[1];\n  r(s, function () {\n    return {\n      continuousStart: function (t, o) {\n        if (void 0 === o && (o = 1e3), !A.active) if (F) console.warn(\"react-top-loading-bar: You can't use both controlling by props and ref methods to control the bar!\");else {\n          var e = t || c(10, 20);\n          V({\n            active: !0,\n            refreshRate: o,\n            startingValue: t\n          }), M(e), Z(e);\n        }\n      },\n      staticStart: function (t) {\n        if (!P.active) if (F) console.warn(\"react-top-loading-bar: You can't use both controlling by props and ref methods to control the bar!\");else {\n          var o = t || c(30, 50);\n          B({\n            active: !0,\n            value: o\n          }), M(o), Z(o);\n        }\n      },\n      complete: function () {\n        F ? console.warn(\"react-top-loading-bar: You can't use both controlling by props and ref methods to control the bar!\") : (M(100), Z(100));\n      }\n    };\n  }), o(function () {\n    H(i({}, G, {\n      background: b\n    })), Q(i({}, K, {\n      boxShadow: \"0 0 10px \" + b + \", 0 0 5px \" + b\n    }));\n  }, [b]), o(function () {\n    if (s) {\n      if (s && void 0 !== u) return void console.warn('react-top-loading-bar: You can\\'t use both controlling by props and ref methods to control the bar! Please use only props or only ref methods! Ref methods will override props if \"ref\" property is available.');\n      Z(j), L(!1);\n    } else u && Z(u), L(!0);\n  }, [u]);\n\n  var U,\n      W,\n      X,\n      Z = function t(o) {\n    o >= 100 ? (H(i({}, G, {\n      width: \"100%\"\n    })), I && Q(i({}, K, {\n      left: o - 10 + \"%\"\n    })), setTimeout(function () {\n      H(i({}, G, {\n        opacity: 0,\n        width: \"100%\",\n        transition: \"all \" + x + \"ms ease-out\",\n        color: b\n      })), setTimeout(function () {\n        P.active && (V(i({}, P, {\n          active: !1\n        })), M(0), t(0)), A.active && (B(i({}, A, {\n          active: !1\n        })), M(0), t(0)), w && w(), M(0), t(0);\n      }, x);\n    }, T)) : (H(function (t) {\n      return i({}, t, {\n        width: o + \"%\",\n        opacity: 1,\n        transition: o > 0 ? \"all \" + k + \"ms ease\" : \"\"\n      });\n    }), I && Q(i({}, K, {\n      left: o - 5.5 + \"%\",\n      transition: o > 0 ? \"all \" + k + \"ms ease\" : \"\"\n    })));\n  };\n\n  return U = function () {\n    var t = c(10, 20);\n    j + t < 90 && (M(j + t), Z(j + t));\n  }, W = P.active ? P.refreshRate : null, X = t(l), o(function () {\n    X.current = U;\n  }), o(function () {}, [void 0]), o(function () {\n    if (null !== W && !1 !== W) {\n      var t = setInterval(function () {\n        return X.current();\n      }, W);\n      return function () {\n        return clearInterval(t);\n      };\n    }\n  }, [W]), a(\"div\", {\n    className: p,\n    style: C\n  }, a(\"div\", {\n    style: G\n  }, I ? a(\"div\", {\n    style: K\n  }) : null));\n});\nexport default s;","map":{"version":3,"sources":["../src/useInterval.ts","../src/utils.ts","../src/index.tsx"],"names":["noop","callback","delay","immediate","savedCallback","useRef","useEffect","current","id","setInterval","clearInterval","randomInt","min","max","Math","floor","random","LoadingBar","forwardRef","progress","height","className","color","background","onLoaderFinished","transitionTime","loaderSpeed","waitingTime","shadow","ref","localProgress","localProgressSet","useState","pressedContinuous","setPressedContinuous","active","startingValue","refreshRate","usingProps","setUsingProps","pressedStaticStart","setStaticStartPressed","value","transition","width","loaderContainerStyle","position","top","left","zIndex","initialShadowStyles","boxShadow","opacity","transform","loaderStyle","loaderStyleSet","shadowStyle","shadowStyleSet","useImperativeHandle","continuousStart","console","warn","val","checkIfFull","staticStart","complete","undefined","_progress","setTimeout","_loaderStyle","React","style"],"mappings":"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","sourcesContent":["import { useEffect, useRef } from 'react'\n\n/** keep typescript happy */\nconst noop = () => {}\n\nexport function useInterval(\n  callback: () => void,\n  delay: number | null | false,\n  immediate?: boolean\n) {\n  const savedCallback = useRef(noop)\n\n  // Remember the latest callback.\n  useEffect(() => {\n    savedCallback.current = callback\n  })\n\n  // Execute callback if immediate is set.\n  useEffect(() => {\n    if (!immediate) return\n    if (delay === null || delay === false) return\n    savedCallback.current()\n  }, [immediate])\n\n  // Set up the interval.\n  useEffect(() => {\n    if (delay === null || delay === false) return undefined\n    const tick = () => savedCallback.current()\n    const id = setInterval(tick, delay)\n    return () => clearInterval(id)\n  }, [delay])\n}\n\nexport default useInterval\n","export function randomInt(min: number, max: number): number {\n  // @ts-ignore\n  return Math.floor(Math.random() * (max - min + 1) + min)\n}\n","import * as React from 'react'\nimport {\n  // eslint-disable-next-line no-unused-vars\n  CSSProperties,\n  useEffect,\n  useState,\n  forwardRef,\n  useImperativeHandle,\n} from 'react'\nimport { useInterval } from './useInterval'\nimport { randomInt } from './utils'\n\ntype IProps = {\n  progress?: number\n  color?: string\n  shadow?: boolean\n  background?: string\n  height?: number\n  onLoaderFinished?: () => void\n  className?: string\n  loaderSpeed?: number\n  transitionTime?: number\n  waitingTime?: number\n}\n\nconst LoadingBar = forwardRef(\n  (\n    {\n      progress,\n      height = 2,\n      className = '',\n      color = 'red',\n      background = 'transparent',\n      onLoaderFinished,\n      transitionTime = 300,\n      loaderSpeed = 500,\n      waitingTime = 1000,\n      shadow = true,\n    }: IProps,\n    ref\n  ) => {\n    const [localProgress, localProgressSet] = useState<number>(0)\n    const [pressedContinuous, setPressedContinuous] = useState<{\n      active: boolean\n      startingValue: number\n      refreshRate: number\n    }>({ active: false, startingValue: 20, refreshRate: 1000 })\n    const [usingProps, setUsingProps] = useState(false)\n\n    const [pressedStaticStart, setStaticStartPressed] = useState<{\n      active: boolean\n      value: number\n    }>({ active: false, value: 20 })\n\n    const initialLoaderStyle: CSSProperties = {\n      height: '100%',\n      background: color,\n      transition: `all ${loaderSpeed}ms ease`,\n      width: '0%',\n    }\n\n    const loaderContainerStyle: CSSProperties = {\n      position: 'fixed',\n      top: 0,\n      left: 0,\n      height,\n      background,\n      zIndex: 99999999999,\n      width: 100 + '%',\n    }\n\n    const initialShadowStyles: CSSProperties = {\n      boxShadow: `0 0 10px ${color}, 0 0 10px ${color}`,\n      width: '5%',\n      opacity: 1,\n      position: 'absolute',\n      height: '100%',\n      transition: `all ${loaderSpeed}ms ease`,\n      transform: 'rotate(3deg) translate(0px, -4px)',\n      left: '-10rem',\n    }\n\n    const [loaderStyle, loaderStyleSet] = useState<CSSProperties>(\n      initialLoaderStyle\n    )\n    const [shadowStyle, shadowStyleSet] = useState<CSSProperties>(\n      initialShadowStyles\n    )\n\n    useImperativeHandle(ref, () => ({\n      continuousStart(startingValue: number, refreshRate: number = 1000) {\n        if (pressedStaticStart.active) return\n        if (usingProps) {\n          console.warn(\n            \"react-top-loading-bar: You can't use both controlling by props and ref methods to control the bar!\"\n          )\n          return\n        }\n\n        const val = startingValue || randomInt(10, 20)\n        setPressedContinuous({\n          active: true,\n          refreshRate,\n          startingValue,\n        })\n        localProgressSet(val)\n        checkIfFull(val)\n      },\n      staticStart(startingValue: number) {\n        if (pressedContinuous.active) return\n        if (usingProps) {\n          console.warn(\n            \"react-top-loading-bar: You can't use both controlling by props and ref methods to control the bar!\"\n          )\n          return\n        }\n\n        const val = startingValue || randomInt(30, 50)\n        setStaticStartPressed({\n          active: true,\n          value: val,\n        })\n        localProgressSet(val)\n        checkIfFull(val)\n      },\n      complete() {\n        if (usingProps) {\n          console.warn(\n            \"react-top-loading-bar: You can't use both controlling by props and ref methods to control the bar!\"\n          )\n          return\n        }\n        localProgressSet(100)\n        checkIfFull(100)\n      },\n    }))\n\n    useEffect(() => {\n      loaderStyleSet({\n        ...loaderStyle,\n        background: color,\n      })\n\n      shadowStyleSet({\n        ...shadowStyle,\n        boxShadow: `0 0 10px ${color}, 0 0 5px ${color}`,\n      })\n    }, [color])\n\n    useEffect(() => {\n      if (ref) {\n        if (ref && progress !== undefined) {\n          console.warn(\n            'react-top-loading-bar: You can\\'t use both controlling by props and ref methods to control the bar! Please use only props or only ref methods! Ref methods will override props if \"ref\" property is available.'\n          )\n          return\n        }\n        checkIfFull(localProgress)\n        setUsingProps(false)\n      } else {\n        if (progress) checkIfFull(progress)\n\n        setUsingProps(true)\n      }\n    }, [progress])\n\n    const checkIfFull = (_progress: number) => {\n      if (_progress >= 100) {\n        // now it should wait a little bit\n        loaderStyleSet({\n          ...loaderStyle,\n          width: '100%',\n        })\n        if (shadow) {\n          shadowStyleSet({\n            ...shadowStyle,\n            left: _progress - 10 + '%',\n          })\n        }\n\n        setTimeout(() => {\n          // now it can fade out\n          loaderStyleSet({\n            ...loaderStyle,\n            opacity: 0,\n            width: '100%',\n            transition: `all ${transitionTime}ms ease-out`,\n            color: color,\n          })\n\n          setTimeout(() => {\n            // here we wait for it to fade\n            if (pressedContinuous.active) {\n              // if we have continous loader just ending, we kill it and reset it\n              setPressedContinuous({\n                ...pressedContinuous,\n                active: false,\n              })\n              localProgressSet(0)\n              checkIfFull(0)\n            }\n\n            if (pressedStaticStart.active) {\n              setStaticStartPressed({\n                ...pressedStaticStart,\n                active: false,\n              })\n              localProgressSet(0)\n              checkIfFull(0)\n            }\n\n            if (onLoaderFinished) onLoaderFinished()\n            localProgressSet(0)\n            checkIfFull(0)\n          }, transitionTime)\n        }, waitingTime)\n      } else {\n        loaderStyleSet((_loaderStyle) => {\n          return {\n            ..._loaderStyle,\n            width: _progress + '%',\n            opacity: 1,\n            transition: _progress > 0 ? `all ${loaderSpeed}ms ease` : '',\n          }\n        })\n\n        if (shadow) {\n          shadowStyleSet({\n            ...shadowStyle,\n            left: _progress - 5.5 + '%',\n            transition: _progress > 0 ? `all ${loaderSpeed}ms ease` : '',\n          })\n        }\n      }\n    }\n\n    useInterval(\n      () => {\n        const random = randomInt(10, 20)\n\n        if (localProgress + random < 90) {\n          localProgressSet(localProgress + random)\n          checkIfFull(localProgress + random)\n        }\n      },\n      pressedContinuous.active ? pressedContinuous.refreshRate : null\n    )\n\n    return (\n      <div className={className} style={loaderContainerStyle}>\n        <div style={loaderStyle}>\n          {shadow ? <div style={shadowStyle} /> : null}\n        </div>\n      </div>\n    )\n  }\n)\n\nexport default LoadingBar\n"]},"metadata":{},"sourceType":"module"}